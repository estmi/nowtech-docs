"use strict";(self.webpackChunkmarkdown_website=self.webpackChunkmarkdown_website||[]).push([[804],{265:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>t,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"clients/puignau/3803/index","title":"3803 - Crear procediment per duplicar un client","description":"Explicacio","source":"@site/docs/clients/puignau/3803/index.md","sourceDirName":"clients/puignau/3803","slug":"/clients/puignau/3803/","permalink":"/nowtech-docs/docs/clients/puignau/3803/","draft":false,"unlisted":false,"editUrl":"https://github.com/estmi/nowtech-docs/tree/master/docs/clients/puignau/3803/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"clientsSidebar","previous":{"title":"Recarrecs per tipus ABC","permalink":"/nowtech-docs/docs/clients/puignau/3502/tipus_abc"},"next":{"title":"4021 - Crm comandes, fer desapareixer linies","permalink":"/nowtech-docs/docs/clients/puignau/4021/"}}');var r=n(74848),c=n(28453);const s={},a="3803 - Crear procediment per duplicar un client",t={},o=[{value:"Explicacio",id:"explicacio",level:2},{value:"Funcionament",id:"funcionament",level:2},{value:"Client Normal",id:"client-normal",level:3},{value:"Planta",id:"planta",level:3},{value:"Funcionament intern",id:"funcionament-intern",level:2},{value:"pPers_DuplicarClient",id:"ppers_duplicarclient",level:3},{value:"pPers_DuplicarClient_pClientes_DatosI",id:"ppers_duplicarclient_pclientes_datosi",level:3},{value:"pPers_DuplicarClient_InsertarDomiciliaciones",id:"ppers_duplicarclient_insertardomiciliaciones",level:3},{value:"pPers_DuplicarClient_PClientes_Datos_Comerciales_U",id:"ppers_duplicarclient_pclientes_datos_comerciales_u",level:3},{value:"pPers_DuplicarClient_PClientes_Datos_Economicos_U",id:"ppers_duplicarclient_pclientes_datos_economicos_u",level:3},{value:"pPers_DuplicarClient_CopiaConfigurables",id:"ppers_duplicarclient_copiaconfigurables",level:3}];function p(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components},{SqlViewer:n}=i;return n||function(e,i){throw new Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("SqlViewer",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"3803---crear-procediment-per-duplicar-un-client",children:"3803 - Crear procediment per duplicar un client"})}),"\n",(0,r.jsx)(i.h2,{id:"explicacio",children:"Explicacio"}),"\n",(0,r.jsxs)(i.p,{children:["Per duplicar un client, utilitzarem l'",(0,r.jsx)(i.code,{children:"Stored Procedure"})," anomenat ",(0,r.jsx)(i.code,{children:"pPers_DuplicarClient"}),"."]}),"\n",(0,r.jsxs)(i.p,{children:["Aquest ",(0,r.jsx)(i.code,{children:"Stored Procedure"})," utilitza 3 parametres:"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"@Client_Orig"}),":",(0,r.jsx)(i.code,{children:"T_ID_Cliente"})]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"@Client_Desti"}),":",(0,r.jsx)(i.code,{children:"T_ID_Cliente"})]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"@IdClientNuevoPadre"}),":",(0,r.jsx)(i.code,{children:"T_ID_Cliente"})," (opcional, default de null)"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"funcionament",children:"Funcionament"}),"\n",(0,r.jsx)(i.p,{children:"Per duplicar un client necessitarem saber 3 coses, \xe9s una planta o un client normal, quin client ens volem basar i quin ser\xe0 el n\xfamero de client dest\xed."}),"\n",(0,r.jsx)(i.h3,{id:"client-normal",children:"Client Normal"}),"\n",(0,r.jsx)(i.p,{children:"En cas de ser un client normal, cridarem el m\xe8tode de forma normal donant-li nom\xe9s els 2 primers par\xe0metres que li indicaran quin client copiar i on \u201cenganxar-lo\u201d."}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-sql",children:"exec pPers_DuplicarClient '5535', '95535'\n"})}),"\n",(0,r.jsxs)(i.p,{children:["Aquesta opci\xf3 ens donar\xe0 com a resultat que el client ",(0,r.jsx)(i.code,{children:"5535"})," t\xe9 un clon que \xe9s el ",(0,r.jsx)(i.code,{children:"95535"}),"."]}),"\n",(0,r.jsx)(i.h3,{id:"planta",children:"Planta"}),"\n",(0,r.jsx)(i.p,{children:"En el cas de ser una planta, necessitarem saber si el pare ha de ser un de nou o \xe9s el mateix. En cas de ser un de nou, cridarem el m\xe8tode un primer cop pel pare i li donarem el nou pare en el 3r par\xe0metre de la segona crida. En cas de duplicar una planta pel mateix pare, no cal passar el 3r par\xe0metre."}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-sql",children:"exec pPers_DuplicarClient '88004', '89004'\nexec pPers_DuplicarClient '1444', '91444', '89004'\n"})}),"\n",(0,r.jsxs)(i.p,{children:["Aquesta opci\xf3, el seu resultat seria, el clon del client ",(0,r.jsx)(i.code,{children:"88004"})," -> ",(0,r.jsx)(i.code,{children:"89004"})," i tamb\xe9 el clon del client ",(0,r.jsx)(i.code,{children:"1444"})," -> ",(0,r.jsx)(i.code,{children:"91444"})," amb el nou pare creat justament abans."]}),"\n",(0,r.jsx)(i.h2,{id:"funcionament-intern",children:"Funcionament intern"}),"\n",(0,r.jsxs)(i.p,{children:["Internament, s'executen 5 ",(0,r.jsx)(i.code,{children:"Stored Procedures"})," m\xe9s els quals cadasc\xfa s'encarrega d'una part de la clonaci\xf3 del client."]}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"#ppers_duplicarclient_pclientes_datosi",children:(0,r.jsx)(i.code,{children:"pPers_DuplicarClient_pClientes_DatosI"})}),": Copia el client i assigna el nou pare en cas d'assignar-lo al 3r par\xe0metre."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"#ppers_duplicarclient_insertardomiciliaciones",children:(0,r.jsx)(i.code,{children:"pPers_DuplicarClient_InsertarDomiciliaciones"})}),": Copiem les domiciliacions del client antic al nou."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"#ppers_duplicarclient_pclientes_datos_comerciales_u",children:(0,r.jsx)(i.code,{children:"pPers_DuplicarClient_PClientes_Datos_Comerciales_U"})}),": Actualitzem les dades comercials."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"#ppers_duplicarclient_pclientes_datos_economicos_u",children:(0,r.jsx)(i.code,{children:"pPers_DuplicarClient_PClientes_Datos_Economicos_U"})}),": Actualitzem les dades econ\xf2miques."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"#ppers_duplicarclient_copiaconfigurables",children:(0,r.jsx)(i.code,{children:"pPers_DuplicarClient_CopiaConfigurables"})}),": Actualitzem les dades configurables."]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"ppers_duplicarclient",children:"pPers_DuplicarClient"}),"\n",(0,r.jsx)(n,{title:"pPers_DuplicarClient",file:"puignau/3803/pPers_DuplicarClient.sql"}),"\n",(0,r.jsx)(i.h3,{id:"ppers_duplicarclient_pclientes_datosi",children:"pPers_DuplicarClient_pClientes_DatosI"}),"\n",(0,r.jsx)(n,{title:"pPers_DuplicarClient_pClientes_DatosI",file:"puignau/3803/pPers_DuplicarClient_pClientes_DatosI.sql"}),"\n",(0,r.jsx)(i.h3,{id:"ppers_duplicarclient_insertardomiciliaciones",children:"pPers_DuplicarClient_InsertarDomiciliaciones"}),"\n",(0,r.jsx)(n,{title:"pPers_DuplicarClient_InsertarDomiciliaciones",file:"puignau/3803/pPers_DuplicarClient_InsertarDomiciliaciones.sql"}),"\n",(0,r.jsx)(i.h3,{id:"ppers_duplicarclient_pclientes_datos_comerciales_u",children:"pPers_DuplicarClient_PClientes_Datos_Comerciales_U"}),"\n",(0,r.jsx)(n,{title:"pPers_DuplicarClient_PClientes_Datos_Comerciales_U",file:"puignau/3803/pPers_DuplicarClient_PClientes_Datos_Comerciales_U.sql"}),"\n",(0,r.jsx)(i.h3,{id:"ppers_duplicarclient_pclientes_datos_economicos_u",children:"pPers_DuplicarClient_PClientes_Datos_Economicos_U"}),"\n",(0,r.jsx)(n,{title:"pPers_DuplicarClient_PClientes_Datos_Economicos_U",file:"puignau/3803/pPers_DuplicarClient_PClientes_Datos_Economicos_U.sql"}),"\n",(0,r.jsx)(i.h3,{id:"ppers_duplicarclient_copiaconfigurables",children:"pPers_DuplicarClient_CopiaConfigurables"}),"\n",(0,r.jsx)(n,{title:"pPers_DuplicarClient_CopiaConfigurables",file:"puignau/3803/pPers_DuplicarClient_CopiaConfigurables.sql"})]})}function d(e={}){const{wrapper:i}={...(0,c.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},28453:(e,i,n)=>{n.d(i,{R:()=>s,x:()=>a});var l=n(96540);const r={},c=l.createContext(r);function s(e){const i=l.useContext(c);return l.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),l.createElement(c.Provider,{value:i},e.children)}}}]);