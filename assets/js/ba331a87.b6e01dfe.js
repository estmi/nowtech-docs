"use strict";(self.webpackChunkmarkdown_website=self.webpackChunkmarkdown_website||[]).push([[8391],{28453:(e,r,a)=>{a.d(r,{R:()=>l,x:()=>t});var i=a(96540);const s={},n=i.createContext(s);function l(e){const r=i.useContext(n);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(n.Provider,{value:r},e.children)}},55340:(e,r,a)=>{a.r(r),a.d(r,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"ahora/ahora-5-N2/index","title":"Ahora tecnico 2","description":"Tipos personalizados","source":"@site/docs/ahora/ahora-5-N2/index.md","sourceDirName":"ahora/ahora-5-N2","slug":"/ahora/ahora-5-N2/","permalink":"/docs/ahora/ahora-5-N2/","draft":false,"unlisted":false,"editUrl":"https://github.com/estmi/nowtech-docs/tree/master/docs/ahora/ahora-5-N2/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"ahoraSidebar","previous":{"title":"Formacio 2025/09/08 - 2025/09/12","permalink":"/docs/ahora/FlexyGO/formacio_202509"},"next":{"title":"Connection string for devexpress report designer","permalink":"/docs/ahora/ahora-5-N2/devexpress_report"}}');var s=a(74848),n=a(28453);const l={},t="Ahora tecnico 2",d={},c=[{value:"Tipos personalizados",id:"tipos-personalizados",level:2},{value:"Integritat referencial",id:"integritat-referencial",level:2},{value:"Prefixe pers",id:"prefixe-pers",level:2},{value:"Generar taula SQL",id:"generar-taula-sql",level:2},{value:"Manteniments",id:"manteniments",level:2},{value:"Taules",id:"taules",level:2},{value:"VS 2022 Comparador de BD per generar personalitzacions",id:"vs-2022-comparador-de-bd-per-generar-personalitzacions",level:3},{value:"Taula <code>Ahora_Session</code>",id:"taula-ahora_session",level:3},{value:"Taula <code>Ahora_Licencias</code>",id:"taula-ahora_licencias",level:3},{value:"Triggers",id:"triggers",level:2},{value:"Crear custom trigger per afegir automaticament registre a mitabla",id:"crear-custom-trigger-per-afegir-automaticament-registre-a-mitabla",level:3},{value:"ITrig",id:"itrig",level:4},{value:"UTrig",id:"utrig",level:4},{value:"DTrig",id:"dtrig",level:4},{value:"Validacio de que hi ha registres afectats",id:"validacio-de-que-hi-ha-registres-afectats",level:3},{value:"sp_settriggerorder",id:"sp_settriggerorder",level:3},{value:"Seguimientos",id:"seguimientos",level:2},{value:"Crear dashboard",id:"crear-dashboard",level:3},{value:"Custom filters (Buscadors)",id:"custom-filters-buscadors",level:2},{value:"Taula <code>Scripts</code>",id:"taula-scripts",level:2}];function o(e){const r={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"ahora-tecnico-2",children:"Ahora tecnico 2"})}),"\n",(0,s.jsx)(r.h2,{id:"tipos-personalizados",children:"Tipos personalizados"}),"\n",(0,s.jsx)(r.p,{children:"Utilitzar tipos personalitzats, per poder normalitzar la BD i en cas de canvis de tipus ser canvis automatics."}),"\n",(0,s.jsx)(r.p,{children:"Programmability -> Types -> User-Defined Data Types:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"T_Id_Cliente"})," = ",(0,s.jsx)(r.code,{children:"varchar(15)"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"T_Fecha_Corta"})," = ",(0,s.jsx)(r.code,{children:"(smalldatetime, not null)"})]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"integritat-referencial",children:"Integritat referencial"}),"\n",(0,s.jsx)(r.p,{children:"Utilizar relacions amb claus foranies."}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["On delete ",(0,s.jsx)(r.code,{children:"Set Null"})," i ",(0,s.jsx)(r.code,{children:"Cascade"})]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"prefixe-pers",children:"Prefixe pers"}),"\n",(0,s.jsx)(r.p,{children:"util per buscar totes les modificacions aplicades fora de fabrica."}),"\n",(0,s.jsx)(r.h2,{id:"generar-taula-sql",children:"Generar taula SQL"}),"\n",(0,s.jsx)(r.p,{children:"Al generar una taula SQL s'ha de donar permisos sobre ella."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"zpermisos pers_MiTabla\n"})}),"\n",(0,s.jsx)(r.h2,{id:"manteniments",children:"Manteniments"}),"\n",(0,s.jsx)(r.p,{children:"Mini forms per gestionar taules:"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"/ahora/ahora-5-N2/crear_script.png",alt:"crear_script"})}),"\n",(0,s.jsx)(r.admonition,{type:"note",children:(0,s.jsx)(r.p,{children:"Per veure l'script t'has de moure de l'estrella als 3 punts i tornar a l'estrella."})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-C#",children:'// Taula, Nom, Modal\r\ngCn.AhoraProceso("DameMantenimiento", out _, gCn, "Pers_MiTabla", "Pers Mi Tabla", false);\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"/ahora/ahora-5-N2/defs_pers_mitabla.png",alt:"defs_pers_mitabla"})}),"\n",(0,s.jsxs)(r.p,{children:["Per poder utilitzar manteniments dins Ahora, s'ha de crear una columna IdDoc, tipus ",(0,s.jsx)(r.code,{children:"T_Id_Doc"}),"."]}),"\n",(0,s.jsx)(r.h2,{id:"taules",children:"Taules"}),"\n",(0,s.jsx)(r.h3,{id:"vs-2022-comparador-de-bd-per-generar-personalitzacions",children:"VS 2022 Comparador de BD per generar personalitzacions"}),"\n",(0,s.jsxs)(r.h3,{id:"taula-ahora_session",children:["Taula ",(0,s.jsx)(r.code,{children:"Ahora_Session"})]}),"\n",(0,s.jsx)(r.p,{children:"Usuaris logejats."}),"\n",(0,s.jsx)(r.p,{children:"Hi ha varis storeds que es basen en aquesta taula per poder gestionar la empresa i delegacio on esta conectada l'usuari."}),"\n",(0,s.jsxs)(r.h3,{id:"taula-ahora_licencias",children:["Taula ",(0,s.jsx)(r.code,{children:"Ahora_Licencias"})]}),"\n",(0,s.jsx)(r.p,{children:"1 registre amb la llicencia. Si es mou BD de SQL Server, la llicencia caduca."}),"\n",(0,s.jsx)(r.admonition,{title:"Llicencia temp",type:"note",children:(0,s.jsx)(r.p,{children:"Al instalar una BD nova, en entrar a Ahora Express, hem d'anar a empresa i assignar un NIF el qual ens dona una llicencia de 30 dies."})}),"\n",(0,s.jsx)(r.h2,{id:"triggers",children:"Triggers"}),"\n",(0,s.jsx)(r.p,{children:"Les taules tenen uns triggers que contenen validacions de les dades."}),"\n",(0,s.jsx)(r.p,{children:"Nomenclatura:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"_ITrig"}),": Trigger de insert."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"_UTrig"}),": Trigger de update."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"_DTrig"}),": Trigger de delete."]}),"\n"]}),"\n",(0,s.jsx)(r.admonition,{title:"ITrig Clientes_Datos_ITrig",type:"info",children:(0,s.jsx)(r.p,{children:"Valida dades i per exemple genera contactes"})}),"\n",(0,s.jsx)(r.h3,{id:"crear-custom-trigger-per-afegir-automaticament-registre-a-mitabla",children:"Crear custom trigger per afegir automaticament registre a mitabla"}),"\n",(0,s.jsx)(r.h4,{id:"itrig",children:"ITrig"}),"\n",(0,s.jsx)(r.p,{children:"Dins de trigger, taula inserted i taula deleted."}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Inserted: obtenim registres ja insertats."}),"\n",(0,s.jsx)(r.li,{children:"Deleted: Obtenim registres ja eliminats."}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"utrig",children:"UTrig"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Inserted: obtenim registres actualitzats."}),"\n",(0,s.jsx)(r.li,{children:"Deleted: Obtenim registres abans d'actualitzar."}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"dtrig",children:"DTrig"}),"\n",(0,s.jsx)(r.p,{children:"Dins de trigger, taula inserted i taula deleted."}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Inserted: obtenim registres ja insertats."}),"\n",(0,s.jsx)(r.li,{children:"Deleted: Obtenim registres ja eliminats."}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"validacio-de-que-hi-ha-registres-afectats",children:"Validacio de que hi ha registres afectats"}),"\n",(0,s.jsx)(r.p,{children:"Amb el seguent IF validem que hi ha registres afectats per l'insert."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"IF @@ROWCOUNT<>0 BEGIN\n"})}),"\n",(0,s.jsx)(r.h3,{id:"sp_settriggerorder",children:"sp_settriggerorder"}),"\n",(0,s.jsx)(r.p,{children:"Per ordenar els triggers d'una taula"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sql",children:"sp_settriggerorder\n"})}),"\n",(0,s.jsx)(r.h2,{id:"seguimientos",children:"Seguimientos"}),"\n",(0,s.jsx)(r.p,{children:"Habilitar-los:"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"/ahora/ahora-5-N2/enable_seguimientos.png",alt:"enable_seguimientos"})}),"\n",(0,s.jsx)(r.h3,{id:"crear-dashboard",children:"Crear dashboard"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"/ahora/ahora-5-N2/send_seguimientos_filter_to_dashboard.png",alt:"send_seguimientos_filter_to_dashboard"})}),"\n",(0,s.jsx)(r.h2,{id:"custom-filters-buscadors",children:"Custom filters (Buscadors)"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"/ahora/ahora-5-N2/create_searcher.png",alt:"create_searcher"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"/ahora/ahora-5-N2/searcher_created.png",alt:"searcher_created"})}),"\n",(0,s.jsx)(r.p,{children:"Enviar a usuari:"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"/ahora/ahora-5-N2/send_to_user.png",alt:"send_to_user"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"/ahora/ahora-5-N2/select_user_to_send.png",alt:"select_user_to_send"})}),"\n",(0,s.jsx)(r.p,{children:"Pasar a predeterminat:"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"/ahora/ahora-5-N2/share_searcher.png",alt:"share_searcher"})}),"\n",(0,s.jsxs)(r.h2,{id:"taula-scripts",children:["Taula ",(0,s.jsx)(r.code,{children:"Scripts"})]}),"\n",(0,s.jsx)(r.p,{children:"Conte els scripts generats"})]})}function h(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);