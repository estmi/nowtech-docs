"use strict";(self.webpackChunkmarkdown_website=self.webpackChunkmarkdown_website||[]).push([[6940],{6169:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>a,contentTitle:()=>s,default:()=>p,frontMatter:()=>c,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"puignau/CRM/updateCRMprices","title":"Update preus en calent de l\'historic de CRM","description":"Articles tots","source":"@site/docs/puignau/CRM/updateCRMprices.md","sourceDirName":"puignau/CRM","slug":"/puignau/CRM/updateCRMprices","permalink":"/nowtech-docs/docs/puignau/CRM/updateCRMprices","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"puignauSidebar","previous":{"title":"tr_Pers_PrePedido_Lineas_AfterInsert","permalink":"/nowtech-docs/docs/puignau/CRM/tr_Pers_PrePedido_Lineas_AfterInsert"},"next":{"title":"Vista televendes","permalink":"/nowtech-docs/docs/puignau/CRM/view_televendes/"}}');var i=r(4848),o=r(8453);const c={},s="Update preus en calent de l'historic de CRM",a={},d=[{value:"Articles tots",id:"articles-tots",level:2},{value:"Bundles",id:"bundles",level:2}];function l(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"update-preus-en-calent-de-lhistoric-de-crm",children:"Update preus en calent de l'historic de CRM"})}),"\n",(0,i.jsx)(t.h2,{id:"articles-tots",children:"Articles tots"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"update pph\r\nset pph.precioUnidad = precioart.precio\r\n\r\nfrom Pers_PrePedido_Calculo_Historico pph\r\n\r\nOUTER APPLY \r\n(\r\n\tSELECT Precio\r\n\tFROM dbo.fPers_DamePrecio_Articulo_Delegacion_v2\r\n\t(\r\n\t\tpph.IdArticulo, pph.IdCliente, NULL, GETDATE(), NULL, NULL,\r\n\t\t\t(select top 1 iddelegacion from Clientes_Datos where IdCliente = pph.IdCliente)\r\n\t)\r\n) AS PrecioArt\n"})}),"\n",(0,i.jsx)(t.h2,{id:"bundles",children:"Bundles"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"update pph\r\nset pph.idarticulohijo = ac.IdArticulo,pph.IdArticuloFeina = acFeina.IdArticulo, pph.PrecioFeina=PrecioFeina.Precio , pph.PrecioUnidad = PrecioArt.Precio\r\n\r\nfrom Pers_PrePedido_Calculo_Historico pph\r\ninner join Articulos_Conjuntos ac ON ac.IdArticuloPadre = pph.IdArticulo and ac.IdArticulo not in (select Article from vPers_Articles where Familia = 'Z-TX')\r\ninner join Articulos_Conjuntos acFeina ON acFeina.IdArticuloPadre = pph.IdArticulo and acFeina.IdArticulo  in (select Article from vPers_Articles where Familia = 'Z-TX')\r\nOUTER APPLY \r\n(\r\n\tSELECT Precio\r\n\tFROM dbo.fPers_DamePrecio_Articulo_Delegacion_v2\r\n\t(\r\n\t\tacFeina.IdArticulo, pph.IdCliente, NULL, GETDATE(), NULL, NULL,\r\n\t\t\t(select top 1 iddelegacion from Clientes_Datos where IdCliente = pph.IdCliente)\r\n\t)\r\n) AS PrecioFeina\r\nOUTER APPLY \r\n(\r\n\tSELECT Precio\r\n\tFROM dbo.fPers_DamePrecio_Articulo_Delegacion_v2\r\n\t(\r\n\t\tac.IdArticulo, pph.IdCliente, NULL, GETDATE(), NULL, NULL,\r\n\t\t\t(select top 1 iddelegacion from Clientes_Datos where IdCliente = pph.IdCliente)\r\n\t)\r\n) AS PrecioArt\n"})})]})}function p(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,t,r)=>{r.d(t,{R:()=>c,x:()=>s});var n=r(6540);const i={},o=n.createContext(i);function c(e){const t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);